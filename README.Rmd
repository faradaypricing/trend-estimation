---
title: "Trend Estimation"
output:
  html_document:
    keep_md: yes
    number_sections: yes
---

# Overview







# Starter For Ten

- All losses are fully developed
- Fixed number of losses (50) per year
- All losses from a single loss distribution

File: [data_set_1.csv](https://github.com/faradaypricing/trend-estimation/blob/master/data_set_1.csv)

```{r echo=FALSE, message=FALSE, warning=FALSE, fig.width = 4, fig.height = 4}
library(ggplot2)
library(dplyr)

set1 <- read.csv("data_set_1.csv")

# Severity Plot
max <- ceiling(max(set1$loss / 1e5))

p <- ggplot(set1, aes(as.factor(year), loss/1e5))

p + geom_boxplot() +
  xlab("Year") + ylab("Loss (100k)") +
  scale_y_continuous(limits = c(0,max), breaks=seq(from = 0, to = max, by = 1)) +
  ggtitle("Box Plot of Loss Severities")

# Frequency Plot
claim.counts <- set1 %>%
  group_by(year) %>%
  summarise(count = n())

p2 <- ggplot(claim.counts, aes(as.factor(year), count))
p2 + geom_bar(stat="identity") +
  xlab("Year") +
  ylab("Loss Count") +
  ggtitle("Loss Frequencies by Year")
  



```


# Random Trend Rates


- All losses fully developed
- Random number of losses per year
- Random trend rate for each year (all sampled from the same distribution)

File: [data_set_2.csv](https://github.com/faradaypricing/trend-estimation/blob/master/data_set_2.csv)


```{r echo=FALSE, message=FALSE, warning=FALSE, fig.width = 4, fig.height = 4}
library(ggplot2)
set1 <- read.csv("data_set_2.csv")

max <- ceiling(max(set1$loss / 1e5))

p <- ggplot(set1, aes(as.factor(year), loss/1e5))

p + geom_boxplot() +
  xlab("Year") + ylab("Loss (100k)") +
  scale_y_continuous(limits = c(0,max), breaks=seq(from = 0, to = max, by = 1))

# Frequency Plot
claim.counts <- set1 %>%
  group_by(year) %>%
  summarise(count = n())

p2 <- ggplot(claim.counts, aes(as.factor(year), count))
p2 + geom_bar(stat="identity") +
  xlab("Year") +
  ylab("Loss Count") +
  ggtitle("Loss Frequencies by Year")
  

```

# IBNR

- All losses fully developed
- Random number of losses per year
- Random trend rate for each year (all sampled from the same distribution)
- IBNR pattern applied to each year to limit reported claims

File: [data_set_3.csv](https://github.com/faradaypricing/trend-estimation/blob/master/data_set_3.csv)


```{r echo=FALSE, message=FALSE, warning=FALSE, fig.width = 4, fig.height = 4}
library(ggplot2)
set1 <- read.csv("data_set_3.csv")

max <- ceiling(max(set1$loss / 1e5))

p <- ggplot(set1, aes(as.factor(year), loss/1e5))

p + geom_boxplot() +
  xlab("Year") + ylab("Loss (100k)") +
  scale_y_continuous(limits = c(0,max), breaks=seq(from = 0, to = max, by = 1))

# Frequency Plot
claim.counts <- set1 %>%
  group_by(year) %>%
  summarise(count = n())

p2 <- ggplot(claim.counts, aes(as.factor(year), count))
p2 + geom_bar(stat="identity") +
  xlab("Year") +
  ylab("Loss Count") +
  ggtitle("Loss Frequencies by Year")
  

```

# IBNER

- Random number of losses per year
- Random trend rate for each year (all sampled from the same distribution)
- IBNR pattern applied to each year to limit reported claims
- IBNER pattern (random) applied to each loss

File: [data_set_4.csv](https://github.com/faradaypricing/trend-estimation/blob/master/data_set_4.csv)


```{r echo=FALSE, message=FALSE, warning=FALSE, fig.width = 4, fig.height = 4}
library(ggplot2)
set1 <- read.csv("data_set_4.csv")

set1$loss <- as.numeric(by(set1, 1:nrow(set1), function(row){
  row[,ncol(row) - row$year + 1]
}))

set1$loss <- as.numeric(by(set1, 1:nrow(set1), function(row){
  row[,ncol(row) - row$year]
}))
max <- ceiling(max(set1$loss / 1e5))

p <- ggplot(set1, aes(as.factor(year), loss/1e5))

p + geom_boxplot() +
  xlab("Year") + ylab("Loss (100k)") +
  scale_y_continuous(limits = c(0,max), breaks=seq(from = 0, to = max, by = 1))

# Frequency Plot
claim.counts <- set1 %>%
  group_by(year) %>%
  summarise(count = n())

p2 <- ggplot(claim.counts, aes(as.factor(year), count))
p2 + geom_bar(stat="identity") +
  xlab("Year") +
  ylab("Loss Count") +
  ggtitle("Loss Frequencies by Year")
  

```

# Notification Level

- Random number of losses per year
- Random trend rate for each year (all sampled from the same distribution)
- IBNR pattern applied to each year to limit reported claims
- IBNER pattern (random) applied to each loss
- Notification level of 750,000

File: [data_set_5.csv](https://github.com/faradaypricing/trend-estimation/blob/master/data_set_5.csv)


```{r echo=FALSE, message=FALSE, warning=FALSE, fig.width = 4, fig.height = 4}
library(ggplot2)
set1 <- read.csv("data_set_5.csv")

set1$loss <- as.numeric(by(set1, 1:nrow(set1), function(row){
  row[,ncol(row) - row$year]
}))
max <- ceiling(max(set1$loss / 1e5))

p <- ggplot(set1, aes(as.factor(year), loss/1e5))

p + geom_boxplot() +
  xlab("Year") + ylab("Loss (100k)") +
  scale_y_continuous(limits = c(0,max), breaks=seq(from = 0, to = max, by = 1))

# Frequency Plot
claim.counts <- set1 %>%
  group_by(year) %>%
  summarise(count = n())

p2 <- ggplot(claim.counts, aes(as.factor(year), count))
p2 + geom_bar(stat="identity") +
  xlab("Year") +
  ylab("Loss Count") +
  ggtitle("Loss Frequencies by Year")
  

```
